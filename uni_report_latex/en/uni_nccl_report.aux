\relax 
\providecommand*\new@tpo@label[2]{}
\providecommand \babel@aux [2]{\global \let \babel@toc \@gobbletwo }
\@nameuse{bbl@beforestart}
\catcode `"\active 
\providecommand\hyper@newdestlabel[2]{}
\providecommand\HyField@AuxAddToFields[1]{}
\providecommand\HyField@AuxAddToCoFields[2]{}
\bibstyle{plain}
\babel@aux{american}{}
\providecommand\BKM@entry[2]{}
\BKM@entry{id=1,dest={73656374696F6E2E31},srcline={75}}{5C3337365C3337375C303030415C303030625C303030735C303030745C303030725C303030615C303030635C30303074}
\BKM@entry{id=2,dest={73656374696F6E2E32},srcline={92}}{5C3337365C3337375C303030495C3030306E5C303030745C303030725C3030306F5C303030645C303030755C303030635C303030745C303030695C3030306F5C3030306E5C3030305C3034305C303030745C3030306F5C3030305C3034305C3030304E5C303030435C303030435C3030304C}
\citation{nccl-repo}
\BKM@entry{id=3,dest={73756273656374696F6E2E322E31},srcline={102}}{5C3337365C3337375C303030435C3030306F5C3030306D5C303030705C303030615C303030725C303030695C303030735C3030306F5C3030306E5C3030305C3034305C303030745C3030306F5C3030305C3034305C3030304D5C303030505C30303049}
\@writefile{toc}{\contentsline {section}{\numberline {1}Abstract}{2}{section.1}\protected@file@percent }
\@writefile{toc}{\contentsline {section}{\numberline {2}Introduction to NCCL}{2}{section.2}\protected@file@percent }
\@writefile{toc}{\contentsline {subsection}{\numberline {2.1}Comparison to MPI}{2}{subsection.2.1}\protected@file@percent }
\BKM@entry{id=4,dest={73756273656374696F6E2E322E32},srcline={114}}{5C3337365C3337375C303030525C303030655C3030306C5C303030655C303030765C303030615C3030306E5C303030745C3030305C3034305C3030304E5C303030435C303030435C3030304C5C3030305C3034305C303030695C3030306E5C303030745C303030655C303030725C3030306E5C303030615C3030306C5C30303073}
\BKM@entry{id=5,dest={73656374696F6E2E33},srcline={456}}{5C3337365C3337375C303030505C303030725C3030306F5C303030665C303030695C3030306C5C303030655C303030725C3030305C3034305C303030505C3030306C5C303030755C303030675C303030695C3030306E}
\@writefile{toc}{\contentsline {subsection}{\numberline {2.2}Relevant NCCL internals}{3}{subsection.2.2}\protected@file@percent }
\@writefile{toc}{\contentsline {section}{\numberline {3}Profiler Plugin}{3}{section.3}\protected@file@percent }
\@writefile{lof}{\contentsline {figure}{\numberline {1}{\ignorespaces Thread creation: User API $\to $ NCCL internal init $\to $ create ProxyService $\to $ create Proxy\-Progress.}}{4}{figure.1}\protected@file@percent }
\newlabel{fig:thread-creation}{{1}{4}{Thread creation: User API $\to $ NCCL internal init $\to $ create ProxyService $\to $ create Proxy\-Progress}{figure.1}{}}
\@writefile{lof}{\contentsline {figure}{\numberline {2}{\ignorespaces Flow from User API to ncclProxyPost}}{5}{figure.2}\protected@file@percent }
\newlabel{fig:proxy-post}{{2}{5}{Flow from User API to ncclProxyPost}{figure.2}{}}
\@writefile{lof}{\contentsline {figure}{\numberline {3}{\ignorespaces The ProxyThread runs in a simple progressing loop: progress ops, then get posted ops (or wait). }}{5}{figure.3}\protected@file@percent }
\newlabel{fig:proxy-progress-loop}{{3}{5}{The ProxyThread runs in a simple progressing loop: progress ops, then get posted ops (or wait)}{figure.3}{}}
\BKM@entry{id=6,dest={73756273656374696F6E2E332E31},srcline={467}}{5C3337365C3337375C303030505C303030725C3030306F5C303030665C303030695C3030306C5C303030655C303030725C3030305C3034305C303030705C3030306C5C303030755C303030675C303030695C3030306E5C3030305C3034305C3030306C5C3030306F5C303030615C303030645C303030695C3030306E5C303030675C3030305C3034305C3030306D5C303030655C303030635C303030685C303030615C3030306E5C303030695C303030735C3030306D}
\citation{nccl-docs}
\citation{ncclsee}
\@writefile{toc}{\contentsline {subsection}{\numberline {3.1}Profiler plugin loading mechanism}{6}{subsection.3.1}\protected@file@percent }
\BKM@entry{id=7,dest={73756273656374696F6E2E332E32},srcline={599}}{5C3337365C3337375C303030505C303030725C3030306F5C303030665C303030695C3030306C5C303030655C303030725C3030305C3034305C303030415C303030505C30303049}
\@writefile{lof}{\contentsline {figure}{\numberline {4}{\ignorespaces User API $\to $ NCCL communicator init $\to $ load profiler plugin and call profiler->init().}}{7}{figure.4}\protected@file@percent }
\newlabel{fig:profiler-init}{{4}{7}{User API $\to $ NCCL communicator init $\to $ load profiler plugin and call profiler->init()}{figure.4}{}}
\@writefile{toc}{\contentsline {subsection}{\numberline {3.2}Profiler API}{7}{subsection.3.2}\protected@file@percent }
\BKM@entry{id=8,dest={73756273756273656374696F6E2E332E322E31},srcline={629}}{5C3337365C3337375C303030695C3030306E5C303030695C30303074}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {3.2.1}init}{8}{subsubsection.3.2.1}\protected@file@percent }
\BKM@entry{id=9,dest={73756273756273656374696F6E2E332E322E32},srcline={683}}{5C3337365C3337375C303030735C303030745C303030615C303030725C303030745C303030455C303030765C303030655C3030306E5C30303074}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {3.2.2}startEvent}{9}{subsubsection.3.2.2}\protected@file@percent }
\BKM@entry{id=10,dest={73756273756273656374696F6E2E332E322E33},srcline={746}}{5C3337365C3337375C303030735C303030745C3030306F5C303030705C303030455C303030765C303030655C3030306E5C30303074}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {3.2.3}stopEvent}{10}{subsubsection.3.2.3}\protected@file@percent }
\@writefile{lof}{\contentsline {figure}{\numberline {5}{\ignorespaces Flow from NCCL API calls to profiler events. Internally, some Collectives (e.g. ncclAlltoAll) are implemented as multiple point-to-point operations, triggering many P2pApi and P2p events. For application settings utilizing ncclGroupStart/End, further examples and visualizations are provided in \autoref {sec:code-examples-visualizations}. }}{11}{figure.5}\protected@file@percent }
\newlabel{fig:profiler-events}{{5}{11}{Flow from NCCL API calls to profiler events. Internally, some Collectives (e.g. ncclAlltoAll) are implemented as multiple point-to-point operations, triggering many P2pApi and P2p events. For application settings utilizing ncclGroupStart/End, further examples and visualizations are provided in \autoref {sec:code-examples-visualizations}}{figure.5}{}}
\@writefile{lof}{\contentsline {figure}{\numberline {6}{\ignorespaces progressOps emits ProxyStep/KernelCh/NetPlugin events. getPostedOps emits ProxyOp events. Several events ProxyCtrl are also emitted.}}{12}{figure.6}\protected@file@percent }
\newlabel{fig:proxy-event-emission}{{6}{12}{progressOps emits ProxyStep/KernelCh/NetPlugin events. getPostedOps emits ProxyOp events. Several events ProxyCtrl are also emitted}{figure.6}{}}
\BKM@entry{id=11,dest={73756273756273656374696F6E2E332E322E34},srcline={1043}}{5C3337365C3337375C303030725C303030655C303030635C3030306F5C303030725C303030645C303030455C303030765C303030655C3030306E5C303030745C303030535C303030745C303030615C303030745C30303065}
\BKM@entry{id=12,dest={73756273756273656374696F6E2E332E322E35},srcline={1055}}{5C3337365C3337375C303030665C303030695C3030306E5C303030615C3030306C5C303030695C3030307A5C30303065}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {3.2.4}recordEventState}{13}{subsubsection.3.2.4}\protected@file@percent }
\@writefile{toc}{\contentsline {subsubsection}{\numberline {3.2.5}finalize}{13}{subsubsection.3.2.5}\protected@file@percent }
\BKM@entry{id=13,dest={73756273756273656374696F6E2E332E322E36},srcline={1116}}{5C3337365C3337375C3030306E5C303030615C3030306D5C30303065}
\BKM@entry{id=14,dest={73656374696F6E2E34},srcline={1122}}{5C3337365C3337375C303030435C3030306F5C303030645C303030655C3030305C3034305C303030655C303030785C303030615C3030306D5C303030705C3030306C5C303030655C303030735C3030305C3034305C303030615C3030306E5C303030645C3030305C3034305C303030765C303030695C303030735C303030755C303030615C3030306C5C303030695C3030307A5C303030615C303030745C303030695C3030306F5C3030306E5C30303073}
\@writefile{lof}{\contentsline {figure}{\numberline {7}{\ignorespaces Flow from User API call $\to $ finalize and plugin unload.}}{14}{figure.7}\protected@file@percent }
\newlabel{fig:profiler-finalize}{{7}{14}{Flow from User API call $\to $ finalize and plugin unload}{figure.7}{}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {3.2.6}name}{14}{subsubsection.3.2.6}\protected@file@percent }
\@writefile{toc}{\contentsline {section}{\numberline {4}Code examples and visualizations}{14}{section.4}\protected@file@percent }
\newlabel{sec:code-examples-visualizations}{{4}{14}{Code examples and visualizations}{section.4}{}}
\BKM@entry{id=15,dest={73756273656374696F6E2E342E31},srcline={1197}}{5C3337365C3337375C3030304F5C3030306E5C303030655C3030305C3034305C303030445C303030655C303030765C303030695C303030635C303030655C3030305C3034305C303030705C303030655C303030725C3030305C3034305C303030545C303030685C303030725C303030655C303030615C30303064}
\@writefile{toc}{\contentsline {subsection}{\numberline {4.1}One Device per Thread}{16}{subsection.4.1}\protected@file@percent }
\@writefile{lof}{\contentsline {figure}{\numberline {8}{\ignorespaces One device per thread: A visualization of the calls generated to the Profiler API, starting from communicator creation, followed by a collective operation and communicator destruction. ProxyStep events have been omitted for visual clarity, see Fig.~\ref {fig:multi-gpu-single-thread-show-proxystep} for a depiction.}}{17}{figure.8}\protected@file@percent }
\newlabel{fig:multi-gpu-single-thread-allreduce}{{8}{17}{One device per thread: A visualization of the calls generated to the Profiler API, starting from communicator creation, followed by a collective operation and communicator destruction. ProxyStep events have been omitted for visual clarity, see Fig.~\ref {fig:multi-gpu-single-thread-show-proxystep} for a depiction}{figure.8}{}}
\BKM@entry{id=16,dest={73756273656374696F6E2E342E32},srcline={1266}}{5C3337365C3337375C3030304D5C303030755C3030306C5C303030745C303030695C303030705C3030306C5C303030655C3030305C3034305C303030445C303030655C303030765C303030695C303030635C303030655C303030735C3030305C3034305C303030705C303030655C303030725C3030305C3034305C303030545C303030685C303030725C303030655C303030615C303030645C3030305C3034305C3030305C3035305C3030306E5C303030635C303030635C3030306C5C303030475C303030725C3030306F5C303030755C303030705C3030305C303531}
\@writefile{lof}{\contentsline {figure}{\numberline {9}{\ignorespaces One device per thread: In Fig.~\ref {fig:multi-gpu-single-thread-allreduce} ProxyStep events have been omitted for visual clarity. However, in multinode settings, many additional profiler API calls for proxyStep events happen, informing about the low level network steps in their event details via recordEventState (indicated as red circles above each of the event bars). The blue dotted lines indicate the parentObj of each proxyStep event, which are the above proxyOp events.}}{18}{figure.9}\protected@file@percent }
\newlabel{fig:multi-gpu-single-thread-show-proxystep}{{9}{18}{One device per thread: In Fig.~\ref {fig:multi-gpu-single-thread-allreduce} ProxyStep events have been omitted for visual clarity. However, in multinode settings, many additional profiler API calls for proxyStep events happen, informing about the low level network steps in their event details via recordEventState (indicated as red circles above each of the event bars). The blue dotted lines indicate the parentObj of each proxyStep event, which are the above proxyOp events}{figure.9}{}}
\@writefile{toc}{\contentsline {subsection}{\numberline {4.2}Multiple Devices per Thread (ncclGroup)}{18}{subsection.4.2}\protected@file@percent }
\newlabel{sec:multiple-devices-per-thread-ncclgroup}{{4.2}{18}{Multiple Devices per Thread (ncclGroup)}{subsection.4.2}{}}
\@writefile{lof}{\contentsline {figure}{\numberline {10}{\ignorespaces Multiple devices per thread: Events from the proxy thread as well as init and finalize calls are omitted. Collective API calls from multiple GPUs managed by a single thread only trigger a single \texttt  {GroupApi} event.}}{19}{figure.10}\protected@file@percent }
\newlabel{fig:single-gpu-single-process-ncclgroup-finalize}{{10}{19}{Multiple devices per thread: Events from the proxy thread as well as init and finalize calls are omitted. Collective API calls from multiple GPUs managed by a single thread only trigger a single \texttt {GroupApi} event}{figure.10}{}}
\BKM@entry{id=17,dest={73756273656374696F6E2E342E33},srcline={1319}}{5C3337365C3337375C303030415C303030675C303030675C303030725C303030655C303030675C303030615C303030745C303030655C303030645C3030305C3034305C3030306F5C303030705C303030655C303030725C303030615C303030745C303030695C3030306F5C3030306E5C30303073}
\@writefile{toc}{\contentsline {subsection}{\numberline {4.3}Aggregated operations}{20}{subsection.4.3}\protected@file@percent }
\BKM@entry{id=18,dest={73656374696F6E2E35},srcline={1403}}{5C3337365C3337375C303030505C303030655C303030725C303030665C3030306F5C303030725C3030306D5C303030615C3030306E5C303030635C303030655C3030305C3034305C303030615C3030306E5C303030645C3030305C3034305C303030735C303030635C303030615C3030306C5C303030615C303030625C303030695C3030306C5C303030695C303030745C30303079}
\@writefile{lof}{\contentsline {figure}{\numberline {11}{\ignorespaces one GPU per thread with aggregated operations: multiple collective calls are grouped together and nccl does only a single kernel launch per thread.}}{21}{figure.11}\protected@file@percent }
\newlabel{fig:one-gpu-per-thread-grouped-collectives}{{11}{21}{one GPU per thread with aggregated operations: multiple collective calls are grouped together and nccl does only a single kernel launch per thread}{figure.11}{}}
\@writefile{toc}{\contentsline {section}{\numberline {5}Performance and scalability}{21}{section.5}\protected@file@percent }
\BKM@entry{id=19,dest={73656374696F6E2E36},srcline={1557}}{5C3337365C3337375C303030445C303030695C303030735C303030635C303030755C303030735C303030735C303030695C3030306F5C3030306E}
\BKM@entry{id=20,dest={73756273656374696F6E2E362E31},srcline={1564}}{5C3337365C3337375C303030435C3030306F5C3030306E5C303030735C303030695C303030645C303030655C303030725C303030615C303030745C303030695C3030306F5C3030306E5C303030735C3030305C3034305C303030665C3030306F5C303030725C3030305C3034305C303030645C303030655C303030765C303030655C3030306C5C3030306F5C303030705C303030655C303030725C30303073}
\@writefile{lot}{\contentsline {table}{\numberline {1}{\ignorespaces Profiler overhead: nccl-tests \texttt  {sendrecv\_perf} (P2P) and \texttt  {all\_reduce\_perf} (collectives). Latency averaged over 1M iterations.}}{23}{table.1}\protected@file@percent }
\newlabel{tab:profiler-overhead}{{1}{23}{Profiler overhead: nccl-tests \texttt {sendrecv\_perf} (P2P) and \texttt {all\_reduce\_perf} (collectives). Latency averaged over 1M iterations}{table.1}{}}
\@writefile{toc}{\contentsline {section}{\numberline {6}Discussion}{23}{section.6}\protected@file@percent }
\@writefile{toc}{\contentsline {subsection}{\numberline {6.1}Considerations for developers}{23}{subsection.6.1}\protected@file@percent }
\@writefile{toc}{\contentsline {paragraph}{\nonumberline Profiler visualization.}{23}{paragraph*.1}\protected@file@percent }
\@writefile{toc}{\contentsline {paragraph}{\nonumberline Correlating Collective Events with \texttt  {seqNumber}.}{23}{paragraph*.2}\protected@file@percent }
\@writefile{toc}{\contentsline {paragraph}{\nonumberline Tracing low level activity back to NCCL API calls with \texttt  {parentObj}.}{24}{paragraph*.3}\protected@file@percent }
\@writefile{lof}{\contentsline {figure}{\numberline {12}{\ignorespaces An example illustrating how parentObj and seqNumber can aid in understanding the timing of concurrent collective operations.}}{24}{figure.12}\protected@file@percent }
\newlabel{fig:phase-4-3rd-iter}{{12}{24}{An example illustrating how parentObj and seqNumber can aid in understanding the timing of concurrent collective operations}{figure.12}{}}
\@writefile{toc}{\contentsline {paragraph}{\nonumberline Process origin for profiler callbacks with PXN enabled.}{24}{paragraph*.4}\protected@file@percent }
\BKM@entry{id=21,dest={73756273656374696F6E2E362E32},srcline={1626}}{5C3337365C3337375C3030304B5C3030306E5C3030306F5C303030775C3030306E5C3030305C3034305C3030306C5C303030695C3030306D5C303030695C303030745C303030615C303030745C303030695C3030306F5C3030306E5C30303073}
\BKM@entry{id=22,dest={73756273656374696F6E2E362E33},srcline={1637}}{5C3337365C3337375C303030505C3030306F5C303030745C303030655C3030306E5C303030745C303030695C303030615C3030306C5C3030305C3034305C303030495C3030306E5C303030745C303030655C303030675C303030725C303030615C303030745C303030695C3030306F5C3030306E5C3030305C3034305C303030775C303030695C303030745C303030685C3030305C3034305C303030535C303030635C3030306F5C303030725C303030655C3030302D5C30303050}
\citation{scorep}
\@writefile{toc}{\contentsline {paragraph}{\nonumberline Tracking communicator parent--child relationships.}{25}{paragraph*.5}\protected@file@percent }
\@writefile{toc}{\contentsline {subsection}{\numberline {6.2}Known limitations}{25}{subsection.6.2}\protected@file@percent }
\@writefile{toc}{\contentsline {subsection}{\numberline {6.3}Potential Integration with Score-P}{25}{subsection.6.3}\protected@file@percent }
\citation{nvtx}
\BKM@entry{id=23,dest={73656374696F6E2E37},srcline={1687}}{5C3337365C3337375C303030435C3030306F5C3030306E5C303030635C3030306C5C303030755C303030735C303030695C3030306F5C3030306E}
\@writefile{lof}{\contentsline {figure}{\numberline {13}{\ignorespaces CUPTI activity is visualized as orange event bars. With a unique correlation Id, it is possible to trace the activity back to KernelLaunch events}}{26}{figure.13}\protected@file@percent }
\newlabel{fig:cupti-example}{{13}{26}{CUPTI activity is visualized as orange event bars. With a unique correlation Id, it is possible to trace the activity back to KernelLaunch events}{figure.13}{}}
\@writefile{toc}{\contentsline {section}{\numberline {7}Conclusion}{26}{section.7}\protected@file@percent }
\bibdata{nccl-refs}
\BKM@entry{id=24,dest={73656374696F6E2A2E36},srcline={1}}{5C3337365C3337375C303030525C303030655C303030665C303030655C303030725C303030655C3030306E5C303030635C303030655C30303073}
\bibcite{scorep}{1}
\bibcite{nccl-repo}{2}
\bibcite{nccl-docs}{3}
\bibcite{nvtx}{4}
\bibcite{ncclsee}{5}
\@writefile{toc}{\contentsline {section}{\nonumberline References}{28}{section*.6}\protected@file@percent }
\global\@namedef{scr@dte@section@lastmaxnumwidth}{10.46805pt}
\global\@namedef{scr@dte@subsection@lastmaxnumwidth}{18.0674pt}
\global\@namedef{scr@dte@subsubsection@lastmaxnumwidth}{26.27988pt}
\@writefile{toc}{\providecommand\tocbasic@end@toc@file{}\tocbasic@end@toc@file}
\gdef \@abspage@last{29}
